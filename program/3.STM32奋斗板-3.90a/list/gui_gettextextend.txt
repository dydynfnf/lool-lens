; generated by ARM C/C++ Compiler, 4.1 [Build 791]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\obj\gui_gettextextend.o --asm_dir=.\list\ --list_dir=.\list\ --depend=.\obj\gui_gettextextend.d --cpu=Cortex-M3 --apcs=interwork -O0 -I.\FWlib\inc -I.\user -I.\CM3 -I.\TFT -I.\GUI\AntiAlias -I.\GUI\Config -I.\GUI\ConvertColor -I.\GUI\ConvertMono -I.\GUI\Core -I.\GUI\Font -I.\GUI\GUI_X -I.\GUI\JPEG -I.\GUI\LCDDriver -I.\GUI\MemDev -I.\GUI\MultiLayer -I.\GUI\Widget -I.\GUI\WM -Id:\Keil\ARM\CMSIS\Include -Id:\Keil\ARM\INC\ST\STM32F10x -DUSE_STDPERIPH_DRIVER -DSTM32F10X_HD -DUSE_STM3210B_EVAL --omf_browse=.\obj\gui_gettextextend.crf GUI\Core\GUI_GetTextExtend.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  GUI_GetTextExtend PROC
;;;31     */
;;;32     void GUI_GetTextExtend(GUI_RECT* pRect, const char GUI_UNI_PTR * s, int MaxNumChars) {
000000  e92d43f7          PUSH     {r0-r2,r4-r9,lr}
000004  4604              MOV      r4,r0
000006  4691              MOV      r9,r2
;;;33       int xMax      = 0;
000008  f04f0700          MOV      r7,#0
;;;34       int NumLines  = 0;
00000c  46b8              MOV      r8,r7
;;;35       int LineSizeX = 0;
00000e  463d              MOV      r5,r7
;;;36       U16 Char;
;;;37       pRect->x0 = GUI_Context.DispPosX;
000010  481d              LDR      r0,|L1.136|
000012  8c40              LDRH     r0,[r0,#0x22]  ; GUI_Context
000014  8020              STRH     r0,[r4,#0]
;;;38       pRect->y0 = GUI_Context.DispPosY;
000016  481c              LDR      r0,|L1.136|
000018  8c80              LDRH     r0,[r0,#0x24]  ; GUI_Context
00001a  8060              STRH     r0,[r4,#2]
;;;39       while (MaxNumChars--) {
00001c  e013              B        |L1.70|
                  |L1.30|
;;;40         Char = GUI_UC__GetCharCodeInc(&s);
00001e  a801              ADD      r0,sp,#4
000020  f7fffffe          BL       GUI_UC__GetCharCodeInc
000024  4606              MOV      r6,r0
;;;41         if ((Char == '\n') || (Char == 0)) {
000026  2e0a              CMP      r6,#0xa
000028  d000              BEQ      |L1.44|
00002a  b946              CBNZ     r6,|L1.62|
                  |L1.44|
;;;42           if (LineSizeX > xMax) {
00002c  42bd              CMP      r5,r7
00002e  dd00              BLE      |L1.50|
;;;43             xMax = LineSizeX;
000030  462f              MOV      r7,r5
                  |L1.50|
;;;44           }
;;;45           LineSizeX = 0;
000032  f04f0500          MOV      r5,#0
;;;46           NumLines++;
000036  f1080801          ADD      r8,r8,#1
;;;47           if (!Char) {
00003a  b926              CBNZ     r6,|L1.70|
;;;48             break;
00003c  e008              B        |L1.80|
                  |L1.62|
;;;49           }
;;;50         } else {
;;;51           LineSizeX += GUI_GetCharDistX(Char);
00003e  4630              MOV      r0,r6
000040  f7fffffe          BL       GUI_GetCharDistX
000044  4405              ADD      r5,r5,r0
                  |L1.70|
000046  ea5f0009          MOVS     r0,r9                 ;39
00004a  f1a90901          SUB      r9,r9,#1              ;39
00004e  d1e6              BNE      |L1.30|
                  |L1.80|
000050  bf00              NOP                            ;48
;;;52         }
;;;53       }
;;;54       if (LineSizeX > xMax) {
000052  42bd              CMP      r5,r7
000054  dd00              BLE      |L1.88|
;;;55         xMax = LineSizeX;
000056  462f              MOV      r7,r5
                  |L1.88|
;;;56       }
;;;57       if (!NumLines) {
000058  f1b80f00          CMP      r8,#0
00005c  d101              BNE      |L1.98|
;;;58         NumLines = 1;
00005e  f04f0801          MOV      r8,#1
                  |L1.98|
;;;59       }
;;;60       pRect->x1 = pRect->x0 + xMax - 1;
000062  8820              LDRH     r0,[r4,#0]
000064  4438              ADD      r0,r0,r7
000066  f1a00001          SUB      r0,r0,#1
00006a  b200              SXTH     r0,r0
00006c  80a0              STRH     r0,[r4,#4]
;;;61       pRect->y1 = pRect->y0 + GUI__GetFontSizeY() * NumLines - 1;
00006e  f7fffffe          BL       GUI__GetFontSizeY
000072  f9b41002          LDRSH    r1,[r4,#2]
000076  fb001008          MLA      r0,r0,r8,r1
00007a  f1a00001          SUB      r0,r0,#1
00007e  b200              SXTH     r0,r0
000080  80e0              STRH     r0,[r4,#6]
;;;62     }
000082  e8bd83fe          POP      {r1-r9,pc}
;;;63     
                          ENDP

000086  0000              DCW      0x0000
                  |L1.136|
                          DCD      GUI_Context

; generated by ARM C/C++ Compiler, 4.1 [Build 791]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\obj\gui_settextstyle.o --asm_dir=.\list\ --list_dir=.\list\ --depend=.\obj\gui_settextstyle.d --cpu=Cortex-M3 --apcs=interwork -O0 -I.\FWlib\inc -I.\user -I.\CM3 -I.\TFT -I.\GUI\AntiAlias -I.\GUI\Config -I.\GUI\ConvertColor -I.\GUI\ConvertMono -I.\GUI\Core -I.\GUI\Font -I.\GUI\GUI_X -I.\GUI\JPEG -I.\GUI\LCDDriver -I.\GUI\MemDev -I.\GUI\MultiLayer -I.\GUI\Widget -I.\GUI\WM -Id:\Keil\ARM\CMSIS\Include -Id:\Keil\ARM\INC\ST\STM32F10x -DUSE_STDPERIPH_DRIVER -DSTM32F10X_HD -DUSE_STM3210B_EVAL --omf_browse=.\obj\gui_settextstyle.crf GUI\Core\GUI_SetTextStyle.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  GUI__cbDrawTextStyle PROC
;;;33     */
;;;34     static void GUI__cbDrawTextStyle(U16 Char) {
000000  e92d41f0          PUSH     {r4-r8,lr}
000004  4606              MOV      r6,r0
;;;35       int x0, x1;
;;;36       x1 = GUI_Context.DispPosX - 1;
000006  4835              LDR      r0,|L1.220|
000008  f9b00022          LDRSH    r0,[r0,#0x22]  ; GUI_Context
00000c  f1a00401          SUB      r4,r0,#1
;;;37       x0 = x1 - GUI_Context.pAFont->pfGetCharDistX(Char) + 1;
000010  4832              LDR      r0,|L1.220|
000012  6980              LDR      r0,[r0,#0x18]  ; GUI_Context
000014  6841              LDR      r1,[r0,#4]
000016  4630              MOV      r0,r6
000018  4788              BLX      r1
00001a  eba40000          SUB      r0,r4,r0
00001e  f1000701          ADD      r7,r0,#1
;;;38       /* Handle Underline */
;;;39       if (GUI_Context.TextStyle & GUI_TS_UNDERLINE) {
000022  482e              LDR      r0,|L1.220|
000024  7b80              LDRB     r0,[r0,#0xe]  ; GUI_Context
000026  f0100f01          TST      r0,#1
00002a  d015              BEQ      |L1.88|
;;;40         int yOff = GUI_Context.pAFont->Baseline;
00002c  482b              LDR      r0,|L1.220|
00002e  6980              LDR      r0,[r0,#0x18]  ; GUI_Context
000030  7f05              LDRB     r5,[r0,#0x1c]
;;;41         if (yOff >= GUI_Context.pAFont->YSize) {
000032  482a              LDR      r0,|L1.220|
000034  6980              LDR      r0,[r0,#0x18]  ; GUI_Context
000036  7d00              LDRB     r0,[r0,#0x14]
000038  42a8              CMP      r0,r5
00003a  dc04              BGT      |L1.70|
;;;42           yOff = GUI_Context.pAFont->YSize - 1;
00003c  4827              LDR      r0,|L1.220|
00003e  6980              LDR      r0,[r0,#0x18]  ; GUI_Context
000040  7d00              LDRB     r0,[r0,#0x14]
000042  f1a00501          SUB      r5,r0,#1
                  |L1.70|
;;;43         }
;;;44         LCD_DrawHLine(x0, GUI_Context.DispPosY + yOff, x1);
000046  4825              LDR      r0,|L1.220|
000048  f9b00024          LDRSH    r0,[r0,#0x24]  ; GUI_Context
00004c  1941              ADDS     r1,r0,r5
00004e  4622              MOV      r2,r4
000050  4638              MOV      r0,r7
000052  f7fffffe          BL       LCD_DrawHLine
;;;45       }
000056  bf00              NOP      
                  |L1.88|
;;;46       /* Handle strike thru */
;;;47       if (GUI_Context.TextStyle & GUI_TS_STRIKETHRU) {
000058  4820              LDR      r0,|L1.220|
00005a  7b80              LDRB     r0,[r0,#0xe]  ; GUI_Context
00005c  f0100f02          TST      r0,#2
000060  d015              BEQ      |L1.142|
;;;48         int yOff = GUI_Context.pAFont->Baseline - ((GUI_Context.pAFont->CHeight + 1) / 2);
000062  491e              LDR      r1,|L1.220|
000064  6989              LDR      r1,[r1,#0x18]  ; GUI_Context
000066  7f89              LDRB     r1,[r1,#0x1e]
000068  f1010001          ADD      r0,r1,#1
00006c  eb0071d0          ADD      r1,r0,r0,LSR #31
000070  4a1a              LDR      r2,|L1.220|
000072  6992              LDR      r2,[r2,#0x18]  ; GUI_Context
000074  7f12              LDRB     r2,[r2,#0x1c]
000076  eba20561          SUB      r5,r2,r1,ASR #1
;;;49         LCD_DrawHLine(x0, GUI_Context.DispPosY + yOff, x1);
00007a  4818              LDR      r0,|L1.220|
00007c  f9b00024          LDRSH    r0,[r0,#0x24]  ; GUI_Context
000080  eb000105          ADD      r1,r0,r5
000084  4622              MOV      r2,r4
000086  4638              MOV      r0,r7
000088  f7fffffe          BL       LCD_DrawHLine
;;;50       }
00008c  bf00              NOP      
                  |L1.142|
;;;51       /* Handle over line */
;;;52       if (GUI_Context.TextStyle & GUI_TS_OVERLINE) {
00008e  4813              LDR      r0,|L1.220|
000090  7b80              LDRB     r0,[r0,#0xe]  ; GUI_Context
000092  f0100f04          TST      r0,#4
000096  d016              BEQ      |L1.198|
;;;53         int yOff = GUI_Context.pAFont->Baseline - GUI_Context.pAFont->CHeight - 1;
000098  4810              LDR      r0,|L1.220|
00009a  6980              LDR      r0,[r0,#0x18]  ; GUI_Context
00009c  7f00              LDRB     r0,[r0,#0x1c]
00009e  490f              LDR      r1,|L1.220|
0000a0  6989              LDR      r1,[r1,#0x18]  ; GUI_Context
0000a2  7f89              LDRB     r1,[r1,#0x1e]
0000a4  eba00001          SUB      r0,r0,r1
0000a8  f1a00501          SUB      r5,r0,#1
;;;54         if (yOff < 0) {
0000ac  2d00              CMP      r5,#0
0000ae  da01              BGE      |L1.180|
;;;55           yOff = 0;
0000b0  f04f0500          MOV      r5,#0
                  |L1.180|
;;;56         }
;;;57         LCD_DrawHLine(x0, GUI_Context.DispPosY + yOff, x1);
0000b4  4809              LDR      r0,|L1.220|
0000b6  f9b00024          LDRSH    r0,[r0,#0x24]  ; GUI_Context
0000ba  1941              ADDS     r1,r0,r5
0000bc  4622              MOV      r2,r4
0000be  4638              MOV      r0,r7
0000c0  f7fffffe          BL       LCD_DrawHLine
;;;58       }
0000c4  bf00              NOP      
                  |L1.198|
;;;59     }
0000c6  e8bd81f0          POP      {r4-r8,pc}
;;;60     
                          ENDP

                  GUI_SetTextStyle PROC
;;;70     */
;;;71     char GUI_SetTextStyle(char Style) {
0000ca  4601              MOV      r1,r0
;;;72       char OldStyle;
;;;73       GUI_LOCK();
;;;74       OldStyle = GUI_Context.TextStyle;
0000cc  4a03              LDR      r2,|L1.220|
0000ce  7b90              LDRB     r0,[r2,#0xe]  ; GUI_Context
;;;75       GUI_pfDispCharStyle = GUI__cbDrawTextStyle;    /* Init function pointer (function in this module) */
0000d0  4a03              LDR      r2,|L1.224|
0000d2  4b04              LDR      r3,|L1.228|
0000d4  601a              STR      r2,[r3,#0]  ; GUI_pfDispCharStyle
;;;76       GUI_Context.TextStyle = Style;
0000d6  4a01              LDR      r2,|L1.220|
0000d8  7391              STRB     r1,[r2,#0xe]
;;;77       GUI_UNLOCK();
;;;78       return OldStyle;
;;;79     }
0000da  4770              BX       lr
;;;80     
                          ENDP

                  |L1.220|
                          DCD      GUI_Context
                  |L1.224|
                          DCD      GUI__cbDrawTextStyle
                  |L1.228|
                          DCD      GUI_pfDispCharStyle

; generated by Component: ARM Compiler 5.05 update 2 (build 169) Tool: ArmCC [4d0f38]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\obj\gui_drawbitmapmag.o --asm_dir=.\list\ --list_dir=.\list\ --depend=.\obj\gui_drawbitmapmag.d --cpu=Cortex-M3 --apcs=interwork -O0 --diag_suppress=9931 -I.\FWlib\inc -I.\user -I.\CM3 -I.\TFT -I.\GUI\AntiAlias -I.\GUI\Config -I.\GUI\ConvertColor -I.\GUI\ConvertMono -I.\GUI\Core -I.\GUI\Font -I.\GUI\GUI_X -I.\GUI\JPEG -I.\GUI\LCDDriver -I.\GUI\MemDev -I.\GUI\MultiLayer -I.\GUI\Widget -I.\GUI\WM -IC:\Users\Administrator\Desktop\gui\STM32·Ü¶·°å-3.98\RTE -Id:\Keil_v5\ARM\PACK\ARM\CMSIS\4.3.0\CMSIS\Include -Id:\Keil_v5\ARM\PACK\Keil\STM32F1xx_DFP\1.1.0\Device\Include -D__UVISION_VERSION=515 -D_RTE_ -DSTM32F10X_HD -DUSE_STDPERIPH_DRIVER -DSTM32F10X_HD -DUSE_STM3210B_EVAL --omf_browse=.\obj\gui_drawbitmapmag.crf GUI\Core\GUI_DrawBitmapMag.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  GUI_DrawBitmapMag PROC
;;;32     */
;;;33     void GUI_DrawBitmapMag(const GUI_BITMAP GUI_UNI_PTR *pBitmap, int x0, int y0, int xMul, int yMul) {
000000  e92d4ff0          PUSH     {r4-r11,lr}
000004  b08b              SUB      sp,sp,#0x2c
000006  4604              MOV      r4,r0
000008  460d              MOV      r5,r1
00000a  4616              MOV      r6,r2
00000c  461f              MOV      r7,r3
00000e  f8dd8050          LDR      r8,[sp,#0x50]
;;;34       GUI_DRAWMODE PrevDraw;
;;;35       int xSize, ySize;
;;;36       const GUI_LOGPALETTE GUI_UNI_PTR * pPal;
;;;37       const LCD_PIXELINDEX* pTrans;
;;;38       GUI_LOCK();
;;;39       pPal = pBitmap->pPal;
000012  f8d4900c          LDR      r9,[r4,#0xc]
;;;40       xSize = pBitmap->XSize;
000016  f8b4a000          LDRH     r10,[r4,#0]
;;;41       ySize = pBitmap->YSize;
00001a  8860              LDRH     r0,[r4,#2]
00001c  9009              STR      r0,[sp,#0x24]
;;;42       pTrans = LCD_GetpPalConvTable(pPal);
00001e  4648              MOV      r0,r9
000020  f7fffffe          BL       LCD_GetpPalConvTable
000024  4683              MOV      r11,r0
;;;43       if (!pTrans) {
000026  f1bb0f00          CMP      r11,#0
00002a  d106              BNE      |L1.58|
;;;44         pTrans = (pBitmap->BitsPerPixel != 1) ? NULL : &LCD_BKCOLORINDEX;
00002c  88e0              LDRH     r0,[r4,#6]
00002e  2801              CMP      r0,#1
000030  d001              BEQ      |L1.54|
000032  2000              MOVS     r0,#0
000034  e000              B        |L1.56|
                  |L1.54|
000036  482a              LDR      r0,|L1.224|
                  |L1.56|
000038  4683              MOV      r11,r0
                  |L1.58|
;;;45       }
;;;46       PrevDraw = GUI_SetDrawMode((pPal && pPal->HasTrans) ? GUI_DRAWMODE_TRANS : 0);
00003a  f1b90f00          CMP      r9,#0
00003e  d004              BEQ      |L1.74|
000040  f8991004          LDRB     r1,[r9,#4]
000044  b109              CBZ      r1,|L1.74|
000046  2102              MOVS     r1,#2
000048  e000              B        |L1.76|
                  |L1.74|
00004a  2100              MOVS     r1,#0
                  |L1.76|
00004c  4608              MOV      r0,r1
00004e  f7fffffe          BL       GUI_SetDrawMode
000052  900a              STR      r0,[sp,#0x28]
;;;47       #if (GUI_WINSUPPORT)
;;;48         WM_ADDORG(x0,y0);
000054  4822              LDR      r0,|L1.224|
000056  6c00              LDR      r0,[r0,#0x40]  ; GUI_Context
000058  4405              ADD      r5,r5,r0
00005a  4821              LDR      r0,|L1.224|
00005c  6c40              LDR      r0,[r0,#0x44]  ; GUI_Context
00005e  4406              ADD      r6,r6,r0
;;;49         {
;;;50           GUI_RECT r;
;;;51           r.x0 = x0;
000060  b228              SXTH     r0,r5
000062  f8ad001c          STRH     r0,[sp,#0x1c]
;;;52           r.x1 = x0 + xSize * xMul -1;
000066  fb0a5007          MLA      r0,r10,r7,r5
00006a  1e40              SUBS     r0,r0,#1
00006c  b200              SXTH     r0,r0
00006e  f8ad0020          STRH     r0,[sp,#0x20]
;;;53           r.y0 = y0;
000072  b230              SXTH     r0,r6
000074  f8ad001e          STRH     r0,[sp,#0x1e]
;;;54           r.y1 = y0 + ySize * yMul -1;
000078  9809              LDR      r0,[sp,#0x24]
00007a  fb006008          MLA      r0,r0,r8,r6
00007e  1e40              SUBS     r0,r0,#1
000080  b200              SXTH     r0,r0
000082  f8ad0022          STRH     r0,[sp,#0x22]
;;;55           WM_ITERATE_START(&r);
000086  a807              ADD      r0,sp,#0x1c
000088  f7fffffe          BL       WM__InitIVRSearch
00008c  b310              CBZ      r0,|L1.212|
00008e  bf00              NOP      
                  |L1.144|
;;;56       #endif
;;;57       if (pBitmap->pMethods) {
000090  6920              LDR      r0,[r4,#0x10]
000092  b160              CBZ      r0,|L1.174|
;;;58         #if GUI_COMPILER_SUPPORTS_FP      /* Do not support this on VERY simple chips and compilers */
;;;59           pBitmap->pMethods->pfDraw(x0, y0, pBitmap->XSize ,pBitmap->YSize, (U8 const *)pBitmap->pData, pBitmap->pPal, xMul, yMul);
000094  e9d40102          LDRD     r0,r1,[r4,#8]
000098  e88d0183          STM      sp,{r0,r1,r7,r8}
00009c  8863              LDRH     r3,[r4,#2]
00009e  8822              LDRH     r2,[r4,#0]
0000a0  6920              LDR      r0,[r4,#0x10]
0000a2  4631              MOV      r1,r6
0000a4  f8d0c000          LDR      r12,[r0,#0]
0000a8  4628              MOV      r0,r5
0000aa  47e0              BLX      r12
0000ac  e00e              B        |L1.204|
                  |L1.174|
;;;60         #endif
;;;61       } else {
;;;62         LCD_DrawBitmap(x0, y0, xSize, ySize, xMul, yMul
0000ae  88a1              LDRH     r1,[r4,#4]
0000b0  88e2              LDRH     r2,[r4,#6]
0000b2  68a0              LDR      r0,[r4,#8]
0000b4  e9cd0b04          STRD     r0,r11,[sp,#0x10]
0000b8  e9cd7800          STRD     r7,r8,[sp,#0]
0000bc  e9cd2102          STRD     r2,r1,[sp,#8]
0000c0  4652              MOV      r2,r10
0000c2  4631              MOV      r1,r6
0000c4  4628              MOV      r0,r5
0000c6  9b09              LDR      r3,[sp,#0x24]
0000c8  f7fffffe          BL       LCD_DrawBitmap
                  |L1.204|
;;;63                         ,pBitmap->BitsPerPixel, pBitmap->BytesPerLine
;;;64                         ,pBitmap->pData, pTrans);
;;;65       }
;;;66       #if (GUI_WINSUPPORT)
;;;67           WM_ITERATE_END();
0000cc  f7fffffe          BL       WM__GetNextIVR
0000d0  2800              CMP      r0,#0
0000d2  d1dd              BNE      |L1.144|
                  |L1.212|
;;;68         }
;;;69       #endif
;;;70       GUI_SetDrawMode(PrevDraw);
0000d4  980a              LDR      r0,[sp,#0x28]
0000d6  f7fffffe          BL       GUI_SetDrawMode
;;;71       GUI_UNLOCK();
;;;72     }
0000da  b00b              ADD      sp,sp,#0x2c
0000dc  e8bd8ff0          POP      {r4-r11,pc}
;;;73     
                          ENDP

                  |L1.224|
                          DCD      GUI_Context

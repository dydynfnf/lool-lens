; generated by Component: ARM Compiler 5.05 update 2 (build 169) Tool: ArmCC [4d0f38]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\obj\guicharm.o --asm_dir=.\list\ --list_dir=.\list\ --depend=.\obj\guicharm.d --cpu=Cortex-M3 --apcs=interwork -O0 --diag_suppress=9931 -I.\FWlib\inc -I.\user -I.\CM3 -I.\TFT -I.\GUI\AntiAlias -I.\GUI\Config -I.\GUI\ConvertColor -I.\GUI\ConvertMono -I.\GUI\Core -I.\GUI\Font -I.\GUI\GUI_X -I.\GUI\JPEG -I.\GUI\LCDDriver -I.\GUI\MemDev -I.\GUI\MultiLayer -I.\GUI\Widget -I.\GUI\WM -IC:\Users\Administrator\Desktop\gui\STM32·Ü¶·°å-3.98\RTE -Id:\Keil_v5\ARM\PACK\ARM\CMSIS\4.3.0\CMSIS\Include -Id:\Keil_v5\ARM\PACK\Keil\STM32F1xx_DFP\1.1.0\Device\Include -D__UVISION_VERSION=515 -D_RTE_ -DSTM32F10X_HD -DUSE_STDPERIPH_DRIVER -DSTM32F10X_HD -DUSE_STM3210B_EVAL --omf_browse=.\obj\guicharm.crf GUI\Core\GUICharM.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  GUIMONO_DispChar PROC
;;;38     */
;;;39     void GUIMONO_DispChar(U16P c) {
000000  e92d4ff0          PUSH     {r4-r11,lr}
000004  b08b              SUB      sp,sp,#0x2c
000006  4605              MOV      r5,r0
;;;40       int c0, c1;
;;;41       const unsigned char GUI_UNI_PTR * pd;
;;;42       int x = GUI_Context.DispPosX;
000008  4873              LDR      r0,|L1.472|
00000a  f9b00022          LDRSH    r0,[r0,#0x22]  ; GUI_Context
00000e  900a              STR      r0,[sp,#0x28]
;;;43       int y = GUI_Context.DispPosY;
000010  4871              LDR      r0,|L1.472|
000012  f9b0a024          LDRSH    r10,[r0,#0x24]  ; GUI_Context
;;;44       /* do some checking if drawing is actually necessary ... */
;;;45       const GUI_FONT_MONO GUI_UNI_PTR * pMono = GUI_Context.pAFont->p.pMono;
000016  69c0              LDR      r0,[r0,#0x1c]  ; GUI_Context
000018  6984              LDR      r4,[r0,#0x18]
;;;46       unsigned int FirstChar = pMono->FirstChar;
00001a  f8b4800c          LDRH     r8,[r4,#0xc]
;;;47       /* translate character into 2 characters to display : c0,c1 */
;;;48       /* Check if regular character first. */
;;;49       if ((c >= (U16P)FirstChar) &&(c <= (U16P)pMono->LastChar)) {
00001e  45a8              CMP      r8,r5
000020  dc09              BGT      |L1.54|
000022  89e0              LDRH     r0,[r4,#0xe]
000024  42a8              CMP      r0,r5
000026  db06              BLT      |L1.54|
;;;50         pd = pMono->pData;
000028  f8d49000          LDR      r9,[r4,#0]
;;;51         c0 = ((int)c) - FirstChar;
00002c  eba50608          SUB      r6,r5,r8
;;;52         c1 = -1;
000030  f04f37ff          MOV      r7,#0xffffffff
000034  e01d              B        |L1.114|
                  |L1.54|
;;;53       } else {
;;;54         /* Check if character is in translation table */
;;;55         GUI_FONT_TRANSINFO const GUI_UNI_PTR * pti = pMono->pTrans;
000036  68a0              LDR      r0,[r4,#8]
;;;56         pd = pMono->pTransData;
000038  f8d49004          LDR      r9,[r4,#4]
;;;57         if (pti) {
00003c  b1a8              CBZ      r0,|L1.106|
;;;58           FirstChar = pti->FirstChar;
00003e  f8b08000          LDRH     r8,[r0,#0]
;;;59           if ((c >= (U16P)FirstChar) && (c <= (U16P)pti->LastChar)) {
000042  45a8              CMP      r8,r5
000044  dc0d              BGT      |L1.98|
000046  8841              LDRH     r1,[r0,#2]
000048  42a9              CMP      r1,r5
00004a  db0a              BLT      |L1.98|
;;;60             GUI_FONT_TRANSLIST const GUI_UNI_PTR * ptl;
;;;61             c -= pti->FirstChar;
00004c  8802              LDRH     r2,[r0,#0]
00004e  1aaa              SUBS     r2,r5,r2
000050  b295              UXTH     r5,r2
;;;62             ptl = pti->pList;
000052  6841              LDR      r1,[r0,#4]
;;;63             ptl += c;
000054  eb010185          ADD      r1,r1,r5,LSL #2
;;;64             c0  = ptl->c0;
000058  f9b16000          LDRSH    r6,[r1,#0]
;;;65             c1  = ptl->c1;
00005c  f9b17002          LDRSH    r7,[r1,#2]
;;;66           } else {
000060  e006              B        |L1.112|
                  |L1.98|
;;;67             c0 = c1 = -1;
000062  f04f36ff          MOV      r6,#0xffffffff
000066  4637              MOV      r7,r6
000068  e002              B        |L1.112|
                  |L1.106|
;;;68           }
;;;69         } else {
;;;70           c0 = c1 = -1;
00006a  f04f36ff          MOV      r6,#0xffffffff
00006e  4637              MOV      r7,r6
                  |L1.112|
;;;71         }
;;;72       }
000070  bf00              NOP      
                  |L1.114|
;;;73       /* Draw first character if it is valid */
;;;74       if (c0!=-1) {
000072  1c70              ADDS     r0,r6,#1
000074  2800              CMP      r0,#0
000076  d077              BEQ      |L1.360|
;;;75         int BytesPerChar = GUI_Context.pAFont->YSize*pMono->BytesPerLine;
000078  4857              LDR      r0,|L1.472|
00007a  69c0              LDR      r0,[r0,#0x1c]  ; GUI_Context
00007c  7d00              LDRB     r0,[r0,#0x14]
00007e  7ca1              LDRB     r1,[r4,#0x12]
000080  4348              MULS     r0,r1,r0
000082  9009              STR      r0,[sp,#0x24]
;;;76         GUI_DRAWMODE DrawMode;
;;;77         int XSize = pMono->XSize;
000084  7c20              LDRB     r0,[r4,#0x10]
000086  9008              STR      r0,[sp,#0x20]
;;;78         int YSize = GUI_Context.pAFont->YSize;
000088  4853              LDR      r0,|L1.472|
00008a  69c0              LDR      r0,[r0,#0x1c]  ; GUI_Context
00008c  7d00              LDRB     r0,[r0,#0x14]
00008e  9007              STR      r0,[sp,#0x1c]
;;;79         /* Select the right drawing mode */
;;;80         DrawMode = GUI_Context.TextMode;
000090  4851              LDR      r0,|L1.472|
000092  f9b0b02a          LDRSH    r11,[r0,#0x2a]  ; GUI_Context
;;;81         /* call drawing routine */
;;;82         {
;;;83           U8 OldMode = LCD_SetDrawMode(DrawMode);
000096  4658              MOV      r0,r11
000098  f7fffffe          BL       LCD_SetDrawMode
00009c  b2c0              UXTB     r0,r0
00009e  9006              STR      r0,[sp,#0x18]
;;;84           LCD_DrawBitmap( x, y,
0000a0  4a4d              LDR      r2,|L1.472|
0000a2  9809              LDR      r0,[sp,#0x24]
0000a4  fb069000          MLA      r0,r6,r0,r9
0000a8  7ca1              LDRB     r1,[r4,#0x12]
0000aa  2301              MOVS     r3,#1
0000ac  e9cd3102          STRD     r3,r1,[sp,#8]
0000b0  e9cd0204          STRD     r0,r2,[sp,#0x10]
0000b4  4610              MOV      r0,r2
0000b6  69c0              LDR      r0,[r0,#0x1c]  ; GUI_Context
0000b8  7dc0              LDRB     r0,[r0,#0x17]
0000ba  4611              MOV      r1,r2
0000bc  69c9              LDR      r1,[r1,#0x1c]  ; GUI_Context
0000be  7d89              LDRB     r1,[r1,#0x16]
0000c0  e9cd1000          STRD     r1,r0,[sp,#0]
0000c4  4651              MOV      r1,r10
0000c6  e9dd3207          LDRD     r3,r2,[sp,#0x1c]
0000ca  980a              LDR      r0,[sp,#0x28]
0000cc  f7fffffe          BL       LCD_DrawBitmap
;;;85                              XSize, YSize,
;;;86                              GUI_Context.pAFont->XMag,  GUI_Context.pAFont->YMag,
;;;87                              1,     /* Bits per Pixel */
;;;88                              pMono->BytesPerLine,
;;;89                              pd + c0* BytesPerChar,
;;;90                              &LCD_BKCOLORINDEX
;;;91                              );
;;;92           if (c1 != -1) {
0000d0  1c78              ADDS     r0,r7,#1
0000d2  b1d8              CBZ      r0,|L1.268|
;;;93             LCD_SetDrawMode(DrawMode | LCD_DRAWMODE_TRANS);
0000d4  f04b0002          ORR      r0,r11,#2
0000d8  f7fffffe          BL       LCD_SetDrawMode
;;;94             LCD_DrawBitmap( x, y,
0000dc  4a3e              LDR      r2,|L1.472|
0000de  9809              LDR      r0,[sp,#0x24]
0000e0  fb079000          MLA      r0,r7,r0,r9
0000e4  7ca1              LDRB     r1,[r4,#0x12]
0000e6  2301              MOVS     r3,#1
0000e8  e9cd3102          STRD     r3,r1,[sp,#8]
0000ec  e9cd0204          STRD     r0,r2,[sp,#0x10]
0000f0  4610              MOV      r0,r2
0000f2  69c0              LDR      r0,[r0,#0x1c]  ; GUI_Context
0000f4  7dc0              LDRB     r0,[r0,#0x17]
0000f6  4611              MOV      r1,r2
0000f8  69c9              LDR      r1,[r1,#0x1c]  ; GUI_Context
0000fa  7d89              LDRB     r1,[r1,#0x16]
0000fc  e9cd1000          STRD     r1,r0,[sp,#0]
000100  4651              MOV      r1,r10
000102  e9dd3207          LDRD     r3,r2,[sp,#0x1c]
000106  980a              LDR      r0,[sp,#0x28]
000108  f7fffffe          BL       LCD_DrawBitmap
                  |L1.268|
;;;95                                XSize, YSize,
;;;96                                GUI_Context.pAFont->XMag,  GUI_Context.pAFont->YMag,
;;;97                                1,     /* Bits per Pixel */
;;;98                                pMono->BytesPerLine,
;;;99                                pd + c1* BytesPerChar,
;;;100                               &LCD_BKCOLORINDEX
;;;101                               );
;;;102          }
;;;103          /* Fill empty pixel lines */
;;;104          if (GUI_Context.pAFont->YDist > GUI_Context.pAFont->YSize) {
00010c  4832              LDR      r0,|L1.472|
00010e  69c0              LDR      r0,[r0,#0x1c]  ; GUI_Context
000110  7d40              LDRB     r0,[r0,#0x15]
000112  4931              LDR      r1,|L1.472|
000114  69c9              LDR      r1,[r1,#0x1c]  ; GUI_Context
000116  7d09              LDRB     r1,[r1,#0x14]
000118  4288              CMP      r0,r1
00011a  dd21              BLE      |L1.352|
;;;105            if (DrawMode != LCD_DRAWMODE_TRANS) {
00011c  f1bb0f02          CMP      r11,#2
000120  d01e              BEQ      |L1.352|
;;;106              LCD_SetDrawMode(DrawMode ^ LCD_DRAWMODE_REV);  /* Reverse so we can fill with BkColor */
000122  f08b0004          EOR      r0,r11,#4
000126  f7fffffe          BL       LCD_SetDrawMode
;;;107              LCD_FillRect(x, 
00012a  482b              LDR      r0,|L1.472|
00012c  69c0              LDR      r0,[r0,#0x1c]  ; GUI_Context
00012e  7d00              LDRB     r0,[r0,#0x14]
000130  f8dfc0a4          LDR      r12,|L1.472|
000134  f8dcc01c          LDR      r12,[r12,#0x1c]  ; GUI_Context
000138  f89cc015          LDRB     r12,[r12,#0x15]
00013c  fb00a10c          MLA      r1,r0,r12,r10
000140  4825              LDR      r0,|L1.472|
000142  69c0              LDR      r0,[r0,#0x1c]  ; GUI_Context
000144  7d40              LDRB     r0,[r0,#0x15]
000146  eb00030a          ADD      r3,r0,r10
00014a  4823              LDR      r0,|L1.472|
00014c  69c0              LDR      r0,[r0,#0x1c]  ; GUI_Context
00014e  f890e016          LDRB     lr,[r0,#0x16]
000152  f8ddc020          LDR      r12,[sp,#0x20]
000156  980a              LDR      r0,[sp,#0x28]
000158  fb0c020e          MLA      r2,r12,lr,r0
00015c  f7fffffe          BL       LCD_FillRect
                  |L1.352|
;;;108                           y + GUI_Context.pAFont->YSize * GUI_Context.pAFont->YDist, 
;;;109                           x + XSize * GUI_Context.pAFont->XMag, 
;;;110                           y + GUI_Context.pAFont->YDist);
;;;111            }
;;;112          }
;;;113          LCD_SetDrawMode(OldMode);
000160  9806              LDR      r0,[sp,#0x18]
000162  f7fffffe          BL       LCD_SetDrawMode
;;;114        } 
;;;115      }
000166  bf00              NOP      
                  |L1.360|
;;;116      GUI_Context.DispPosX+=pMono->XDist;
000168  481b              LDR      r0,|L1.472|
00016a  8c40              LDRH     r0,[r0,#0x22]  ; GUI_Context
00016c  7c61              LDRB     r1,[r4,#0x11]
00016e  4408              ADD      r0,r0,r1
000170  b200              SXTH     r0,r0
000172  4919              LDR      r1,|L1.472|
000174  8448              STRH     r0,[r1,#0x22]
;;;117    }
000176  b00b              ADD      sp,sp,#0x2c
000178  e8bd8ff0          POP      {r4-r11,pc}
;;;118    
                          ENDP

                  GUIMONO_GetCharDistX PROC
;;;122    */
;;;123    int GUIMONO_GetCharDistX(U16P c) {
00017c  4601              MOV      r1,r0
;;;124      const GUI_FONT_MONO GUI_UNI_PTR * pMono = GUI_Context.pAFont->p.pMono;
00017e  4816              LDR      r0,|L1.472|
000180  69c0              LDR      r0,[r0,#0x1c]  ; GUI_Context
000182  6982              LDR      r2,[r0,#0x18]
;;;125      GUI_USE_PARA(c);
000184  bf00              NOP      
;;;126      return pMono->XDist;
000186  7c50              LDRB     r0,[r2,#0x11]
;;;127    }
000188  4770              BX       lr
;;;128    
                          ENDP

                  GUIMONO_GetFontInfo PROC
;;;132    */
;;;133    void GUIMONO_GetFontInfo(const GUI_FONT GUI_UNI_PTR * pFont, GUI_FONTINFO* pfi) {
00018a  bf00              NOP      
;;;134      GUI_USE_PARA(pFont);
;;;135      pfi->Flags = GUI_FONTINFO_FLAG_MONO;
00018c  2202              MOVS     r2,#2
00018e  800a              STRH     r2,[r1,#0]
;;;136    }
000190  4770              BX       lr
;;;137    
                          ENDP

                  GUIMONO_IsInFont PROC
;;;141    */
;;;142    char GUIMONO_IsInFont(const GUI_FONT GUI_UNI_PTR * pFont, U16 c) {
000192  b5f0              PUSH     {r4-r7,lr}
000194  4604              MOV      r4,r0
;;;143      const GUI_FONT_MONO GUI_UNI_PTR * pMono = pFont->p.pMono;
000196  69a3              LDR      r3,[r4,#0x18]
;;;144      unsigned int FirstChar = pMono->FirstChar;
000198  899d              LDRH     r5,[r3,#0xc]
;;;145      /* Check if regular character first. */
;;;146      if ((c >= (U16P)FirstChar) &&(c <= (U16P)pMono->LastChar)) {
00019a  428d              CMP      r5,r1
00019c  dc04              BGT      |L1.424|
00019e  89d8              LDRH     r0,[r3,#0xe]
0001a0  4288              CMP      r0,r1
0001a2  db01              BLT      |L1.424|
;;;147        return 1;  /* Yes, we have it ! */
0001a4  2001              MOVS     r0,#1
                  |L1.422|
;;;148      } else {
;;;149       /* Check if character is in translation table */
;;;150        GUI_FONT_TRANSINFO const GUI_UNI_PTR * pti;
;;;151        pti = pMono->pTrans;
;;;152        if (pti) {
;;;153          if ((c >= pti->FirstChar) && (c <= pti->LastChar)) {
;;;154            const GUI_FONT_TRANSLIST GUI_UNI_PTR * pList;
;;;155            pList = pti->pList + c - pti->FirstChar;
;;;156            if (pList->c0 >= 0) {
;;;157              return 1;  /* Yes, we have it ! */
;;;158            }
;;;159          }
;;;160        }
;;;161      }
;;;162      return 0;  /* No, we can not display this character */
;;;163    }
0001a6  bdf0              POP      {r4-r7,pc}
                  |L1.424|
0001a8  689a              LDR      r2,[r3,#8]            ;151
0001aa  b192              CBZ      r2,|L1.466|
0001ac  8810              LDRH     r0,[r2,#0]            ;153
0001ae  4288              CMP      r0,r1                 ;153
0001b0  dc0f              BGT      |L1.466|
0001b2  8850              LDRH     r0,[r2,#2]            ;153
0001b4  4288              CMP      r0,r1                 ;153
0001b6  db0c              BLT      |L1.466|
0001b8  6850              LDR      r0,[r2,#4]            ;155
0001ba  eb000081          ADD      r0,r0,r1,LSL #2       ;155
0001be  8817              LDRH     r7,[r2,#0]            ;155
0001c0  eba00687          SUB      r6,r0,r7,LSL #2       ;155
0001c4  f9b60000          LDRSH    r0,[r6,#0]            ;156
0001c8  2800              CMP      r0,#0                 ;156
0001ca  db01              BLT      |L1.464|
0001cc  2001              MOVS     r0,#1                 ;157
0001ce  e7ea              B        |L1.422|
                  |L1.464|
0001d0  bf00              NOP                            ;159
                  |L1.466|
0001d2  bf00              NOP                            ;161
0001d4  2000              MOVS     r0,#0                 ;162
0001d6  e7e6              B        |L1.422|
;;;164    
                          ENDP

                  |L1.472|
                          DCD      GUI_Context
